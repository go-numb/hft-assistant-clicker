# HFT Assistant Click Order開発者ドキュメント

## 概要
HFT Assistant Click Orderは、Oanda MT4/5、EA（Expert Advisor）と連携し、ボラティリティの監視や注文の執行(マウスコントロールによるクリック)を行うことができます。

当ドキュメントは開発者用メモを含むドキュメントです。  
プログラムの概要、インストールと操作のステップバイステップの詳細説明、トラブルシューティングのためのFAQ（よくある質問）セクションを提供します。

## システム要件
- WindowsOS
- Google Chrome（PORT参照時）またはMicrosoft Edge（WebView2使用時）
- Oanda MT4/5プラットフォームと内部EA（Expert Advisor）。
- CPU 3.0Hz、MEMORY 4GB（主にブラウザの要件として使用します。）
- インターネット接続
- PORT: 8080の使用法 ※マルチポート実装で自動PORT選択になりました。

## 一時ファイル配布のインストール手順
1. 付属のリンクからソースファイルをダウンロードします： [ダウンロード](https://github.com/go-numb/hft-assistant-clicker)
2. 任意の場所に配置します。
3. フォルダ内に `main.go` があることを確認する（_data は注文履歴保存用）。
4. ビルドする `$ go build` 
5. 5. `logic.exe` をダブルクリックし、アプリケーションウィンドウを開きます。開かない場合や設定画面が表示されない場合は、Chromeなどのブラウザを起動し、http://localhost:8080 にアクセスしてください。※マルチポート実装で自動PORT選択になりました。


## フォルダ内説明
HTF-ASSISTANT-CLICKER  
├ _data/: デバッグ用のログファイルを保存するフォルダ  
├ api/: GUIとの通信部分  
├ key/: プログラム強制終了ショートカットキーの監視  
├ publisher/: [重要] 配布時に触るファイル群を集約したフォルダ  
│ ├ install-script.sh: 実行するとビルド環境を整備するシェルスクリプト  
│ ├ PUBLISHER.md: 配布用説明書。ビルド環境や方法を記載。  
│  
├ setting/: 設定ファイルを取り扱うファイル群を集約したフォルダ  
├ trade/: 発注部分を取り扱うファイル群を集約したフォルダ。詳細はソースコードに記載しています。  
├ view/: GUI部分を取り扱うファイル群を集約したフォルダであり、静的なファイル群は_buildに整理済み。  
├ main.go: 上記各部を組み合わせて司る起動またはビルド用ファイル  
├ logic.exe: ビルドすると出力されるアプリファイル。_buildに移動させてください。  
├ README.md: 開発者用メモ(非整形)  
└ go.mod,go.sum: パッケージ管理情報  


## 使用者設定
1. Oanda MT4/5を開き、_dataフォルダ内にあるEA `get_ticker_for_namepipe` を起動します（必要に応じてフォルダを移動してください）。
   1. logic.exeのコンソールログで現在の価格表示を確認します
2. 必要に応じて設定やオブジェクト登録をカスタマイズし、[実行]をクリックしてクリックアクセスを許可する。

## FAQ
Q: アプリケーションを実行する際に、ファイアウォールの設定は必要ですか？

A：WebView2アプリケーションはファイアウォールの設定を必要としませんが、WebView2を使用したアプリケーションがファイアウォールによってブロックされる場合があります。このような場合は、ファイアウォールの設定を確認し、アプリケーションが許可されていることを確認するか、ファイアウォールを一時的に無効にしてアプリケーションが問題なく実行されるかどうかをテストしてください。


# Version
プロダクト版以降変更点

**プロダクト版v1.3: 2023/04/29 05:00**  
‐ 配布用ドキュメント追記

**プロダクト版v1.3: 2023/04/28 16:00**  
‐ MT5 EA追加

**プロダクト版v1.25: 2023/04/26 16:00**  
‐ OnlyEntry系での決済を有効にしました

**プロダクト版v1.2: 2023/04/11 16:00**
- GUI [注文タイプ]表記整備
- 注文タイプテスト

**プロダクト版v1.1: 2023/04/10 18:00**
- GUI 表記変更
- [[Exit],[ExitBuy],[ExitSell]]追加
- チェック関数追加
- 自動テスト追加
  - 取引履歴配信
  - 速度計測関数追加（react-rate.goの関数を必要なところに追加すれば時間計測ファイルを生成）
- 売買方向指定決済関数追加

**プロダクト版v1.0: 2023/04/07 18:30**
- GUI 表記変更
  
**β0.98: 2023/04/07 16:00**
- GUI 説明文
- GUI 検知間隔選択式へ変更。伴い、プログラム内部調整
- 更新間隔削除
- マウスコントロール性向上

**β0.95: 2023/04/07 4:00**
- GUI 時間間隔などの表記を追加
- GUI 時間間隔の上限を1000[ms], 1000[s]に
- GUI 各パラメータの最小値下限を変更
- GUI [pips]設定値を0.01=1pipsに定義
- [EUR,GBP,AUD,XAU]対USD単位シンボルの[pips]設定値を1/100

**β0.91: 2023/04/06 4:00**
- 説明詳細追記
- 座標登録と保存、読込
- スタート時に設定値及び値の取得のチェック
- APIからのmsgを日本語に統一

**β0.9: 2023/04/05 4:00**
- 座標登録をドラッグアンドドロップに
- GUIに座標表示
- isTrade 変数のコントロールをより厳格に管理

# 改善TODO
## TODO WORKS
1. 再起動出来ない不具合
2. 他通貨対応
3. 設定のシームレス対応
4. キーボードによる停止

## 再構築検討部分
- 1: 値の更新間隔のチェック
- 2: 設定から反映までをGUIに通知
- 3: 通貨小数点の分岐
- 4: キーボードショートカットの登録（マルチポートも同時に閉じてしまう）


## 実装後の考慮点
### マルチポートについて
‐ 設定ファイル
‐ 値の読み込み
‐ マルチ立ち上げ個数制限


### ショートカットキーストップについて検討点
‐ マルチ起動したすべてのアプリがショートカットで停止していいのか
‐ 

## 参考

![デモ取引損益履歴プロット](https://github.com/go-numb/hft-assistant-clicker/blob/images/_data/demo.jpg)

## Author

[@_numbP](https://twitter.com/_numbP)

## License

[MIT](https://github.com/go-numb/hft-assistant-clicker/blob/master/LICENSE)